<!DOCTYPE html>
<html class="client-js" dir="ltr" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Pacman/Tips and tricks (简体中文) - ArchWiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Pacman/Tips_and_tricks_(简体中文)","wgTitle":"Pacman/Tips and tricks (简体中文)","wgCurRevisionId":456232,"wgRevisionId":456232,"wgArticleId":4435,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with ignored display titles","Package management (简体中文)","简体中文"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Pacman/Tips_and_tricks_(简体中文)","wgRelevantArticleId":4435,"wgRequestId":"1a24a544b0a6c97cd896d7a3","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false}});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.archlinux.styles":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1p88237",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/load.css">
<script async="" src="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/load_002.php"></script>
<!--[if IE 6]><link rel="stylesheet" href="/skins/ArchLinux/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/ArchLinux/IE70Fixes.css?303" media="screen"/><![endif]-->
<style>
.mw-collapsible-toggle{float:right;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}  .mw-content-ltr .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr .mw-collapsible-toggle{float:right} .mw-content-rtl .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl .mw-collapsible-toggle{float:left}.mw-customtoggle,.mw-collapsible-toggle{cursor:pointer} caption .mw-collapsible-toggle,.mw-content-ltr caption .mw-collapsible-toggle,.mw-content-rtl caption .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr caption .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl caption .mw-collapsible-toggle{float:none} li .mw-collapsible-toggle,.mw-content-ltr li .mw-collapsible-toggle,.mw-content-rtl li .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr li .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:#fff;cursor:pointer;border:solid 1px #aaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:#fff;cursor:pointer;border:solid 1px #aaa;padding:0;margin:0}.suggestions-result{color:#000;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left; overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}.suggestions-result-current{background-color:#4c59a6;color:#fff}.suggestions-special .special-label{color:#808080;text-align:left}.suggestions-special .special-query{color:#000;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:#c0c0c0}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:#fff}.highlight{font-weight:bold}
@media screen {
	.tochidden,.toctoggle{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.toctoggle{font-size:94%}}
@media print {
	#toc.tochidden,.toctoggle{display:none}}
.postedit-container{margin:0 auto;position:fixed;top:0;height:0;left:50%;z-index:1000;font-size:13px}.postedit-container:hover{cursor:pointer}.postedit{position:relative;top:0.6em;left:-50%;padding:.6em 3.6em .6em 1.1em;line-height:1.5625em;color:#626465;background-color:#f4f4f4;border:1px solid #dcd9d9;text-shadow:0 0.0625em 0 rgba( 255,255,255,0.5 );border-radius:5px;box-shadow:0 2px 5px 0 #ccc;-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-ms-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.skin-monobook .postedit{top:6em !important}.postedit-faded{opacity:0}.postedit-icon{padding-left:41px;  line-height:25px;background-repeat:no-repeat;background-position:8px 50%}.postedit-icon-checkmark{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB9ElEQVR4AZWRA3AYURQArxrVHtW2bdu2bdu2zdi2bdu2bWxs7zeehZaw4f70kbs+zI3e/nWK+RWx3aOFlrL56Sy5SxrruG69hlv6OyK+mz+8KDSXdXembj0ispT7tjs4ZTIbpYBvxGSGKzZTeFrb7W/meN002swFs0U8ttpHTkF2BvCqWQrW35929bTsKm5Zb+SEwWwcY8wAngB9m7Z+d+rIPZ/npdy12M5p47n8dXsCYAf0qPy06eGMdktuDu9Qf+JmKl3SWM91qzVcN9tAbEYkwMaq0tyb1m/To5kP170el/BK8/qa6sJr70ydf+T/Uu5ab+Oo/lS0AkUBpIFWlZ9WPhxpse/PHO7YbOOczjL0vZV2lNxPPtG73dYXM+xvm2znrOl83tidoqCwMBgYXsPFB0on5S6pr+eK5TKuW67lgvaKvF8mL1dtfTL32FHxRdyx3cQpg7m4x9sCXKkTIzA4LDH44zWdzaUf71hv5rTG4uyzcusybxSX7aThbMQ8XgCYAp3rzTTQOiIh9PNlzY3FSuZxrzjme1Y7uGS6kjsWO4jPjM4FVjRZsvD4kO9XtTZzQn82NyzWc0B7AmZh6gA/hOYSGhfw9YbOVnarj+S7800AL2BIsxUAbWNToj7bhBuQmZcOsFdoKUC74rGheCwXmqAIQTc9jQcrADIAAAAASUVORK5CYII=);background-image:url(/resources/src/mediawiki.action/images/green-checkmark.png?d94f1)!ie;background-position:left}.postedit-close{position:absolute;padding:0 .8em;right:0;top:0;font-size:1.25em;font-weight:bold;line-height:2.3em;color:#000;text-shadow:0 0.0625em 0 #fff;text-decoration:none;opacity:0.2;filter:alpha( opacity=20 )}.postedit-close:hover{color:#000;text-decoration:none;opacity:0.4;filter:alpha( opacity=40 )}</style><style>
.suggestions a.mw-searchSuggest-link,.suggestions a.mw-searchSuggest-link:hover,.suggestions a.mw-searchSuggest-link:active,.suggestions a.mw-searchSuggest-link:focus{color:#000;text-decoration:none}.suggestions-result-current a.mw-searchSuggest-link,.suggestions-result-current a.mw-searchSuggest-link:hover,.suggestions-result-current a.mw-searchSuggest-link:active,.suggestions-result-current a.mw-searchSuggest-link:focus{color:#fff}.suggestions a.mw-searchSuggest-link .special-query{ overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}</style><meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/load_002.css">
<style></style>
<meta name="generator" content="MediaWiki 1.28.2">
<link rel="shortcut icon" href="https://wiki.archlinux.org/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.archlinux.org/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="https://wiki.archlinux.org/index.php?title=Special:RecentChanges&amp;feed=atom">
<script src="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/load.php"></script></head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Tips_and_tricks_简体中文 rootpage-Pacman skin-archlinux action-view feature-footer-v2">
		<div id="archnavbar"><!-- Arch Linux global navigation bar -->
			<div id="archnavbarlogo">
				<p><a id="logo" href="https://www.archlinux.org/"></a></p>
			</div>
			<div id="archnavbarmenu">
				<ul id="archnavbarlist">
					<li id="anb-home"><a href="https://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="https://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki" class="anb-selected"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-security"><a href="https://security.archlinux.org/">Security</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="https://www.archlinux.org/download/">Download</a></li>				</ul>
			</div>
		</div><!-- #archnavbar -->

		<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Pacman/Tips and tricks (简体中文)</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ArchWiki</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="https://wiki.archlinux.org/index.php/Pacman" title="Pacman">Pacman</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="en"><div style="float:right; clear:right; width:25%; margin: 0 0 0.5em 0.5em;"><p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">相关文章</p><ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="https://wiki.archlinux.org/index.php/Pacman_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Pacman (简体中文)">pacman</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="https://wiki.archlinux.org/index.php/Mirrors_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Mirrors (简体中文)">Mirrors (简体中文)</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="https://wiki.archlinux.org/index.php/Creating_packages_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Creating packages (简体中文)">创建软件包</a></li>
</ul></div>
<div class="noprint archwiki-template-message">
<p><a href="https://wiki.archlinux.org/index.php/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/Tango-preferences-desktop-locale.png" width="48" height="48"></a><b>本页面需要更新翻译，内容可能已经与英文脱节。要贡献翻译，请访问<a href="https://wiki.archlinux.org/index.php/ArchWiki_Translation_Team_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="ArchWiki Translation Team (简体中文)">简体中文翻译组</a>。</b><a href="https://wiki.archlinux.org/index.php/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="Pacman_Tips%20and%20tricks%20%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29%20-%20ArchWiki_files/Tango-preferences-desktop-locale.png" width="48" height="48"></a></p>
<div><b>附注:</b> <span style="color:red;">please use the first argument of the template to provide more detailed indications.</span></div>
</div>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> 翻译状态： </strong>本文是英文页面 <a href="https://wiki.archlinux.org/index.php/Pacman_tips" class="mw-redirect" title="Pacman tips">Pacman_tips</a> 的<a href="https://wiki.archlinux.org/index.php/ArchWiki_Translation_Team_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="ArchWiki Translation Team (简体中文)">翻译</a>，最后翻译时间：2012-05-17，点击<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Pacman_tips&amp;diff=0&amp;oldid=201509">这里</a>可以查看翻译后英文页面的改动。</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2><span class="toctoggle">&nbsp;[<a role="button" tabindex="0" id="togglelink">hide</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E4.BF.AE.E9.A5.B0.E5.92.8C.E4.BE.BF.E5.88.A9"><span class="tocnumber">1</span> <span class="toctext">修饰和便利</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.E5.BD.A9.E8.89.B2.E8.BE.93.E5.87.BA"><span class="tocnumber">1.1</span> <span class="toctext">彩色输出</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#.E5.BF.AB.E6.8D.B7.E6.96.B9.E5.BC.8F"><span class="tocnumber">1.2</span> <span class="toctext">快捷方式</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#.E9.85.8D.E7.BD.AE_shell"><span class="tocnumber">1.2.1</span> <span class="toctext">配置 shell</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#.E7.94.A8.E6.B3.95"><span class="tocnumber">1.2.2</span> <span class="toctext">用法</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#.E6.B3.A8.E8.A7.A3"><span class="tocnumber">1.2.3</span> <span class="toctext">注解</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#.E5.B7.A7.E7.94.A8_Bash_.E8.AF.AD.E6.B3.95"><span class="tocnumber">1.3</span> <span class="toctext">巧用 Bash 语法</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#.E7.BB.B4.E6.8A.A4"><span class="tocnumber">2</span> <span class="toctext">维护</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#.E6.98.BE.E7.A4.BA.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85.E5.8F.8A.E5.85.B6.E5.A4.A7.E5.B0.8F"><span class="tocnumber">2.1</span> <span class="toctext">显示所有软件包及其大小</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#.E6.9F.A5.E6.89.BE.E4.B8.8D.E5.B1.9E.E4.BA.8E.E4.BB.BB.E4.BD.95.E8.BD.AF.E4.BB.B6.E5.8C.85.E7.9A.84.E6.96.87.E4.BB.B6"><span class="tocnumber">2.1.1</span> <span class="toctext">查找不属于任何软件包的文件</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#.E5.88.A0.E9.99.A4.E5.AD.A4.E7.AB.8B.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">2.2</span> <span class="toctext">删除孤立软件包</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.E5.88.A0.E9.99.A4base.E8.BD.AF.E4.BB.B6.E5.8C.85.E7.BB.84.E4.BB.A5.E5.A4.96.E7.9A.84.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">2.3</span> <span class="toctext">删除base软件包组以外的所有软件包</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.E4.BB.85.E6.98.BE.E7.A4.BA.E6.AD.A3.E5.BC.8F.E5.AE.89.E8.A3.85.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">2.4</span> <span class="toctext">仅显示正式安装的软件包</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#.E5.AE.89.E8.A3.85.E5.92.8C.E4.BF.AE.E5.A4.8D"><span class="tocnumber">3</span> <span class="toctext">安装和修复</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#.E4.BB.8E_CD.2FDVD.2FISO_.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.1</span> <span class="toctext">从 CD/DVD/ISO 安装软件包</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#.E4.BB.8E_Arch_.E7.9A.84_core_.E9.95.9C.E5.83.8F.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.1.1</span> <span class="toctext">从 Arch 的 core 镜像安装软件包</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#.E8.87.AA.E5.BB.BA.E6.9C.AC.E5.9C.B0.E4.BB.93.E5.BA.93"><span class="tocnumber">3.2</span> <span class="toctext">自建本地仓库</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#.E5.9C.A8.E7.BD.91.E7.BB.9C.E4.B8.8A.E5.85.B1.E4.BA.ABpacman.E7.BC.93.E5.AD.98"><span class="tocnumber">3.3</span> <span class="toctext">在网络上共享pacman缓存</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#.E9.81.BF.E5.85.8D.E8.BF.87.E5.BA.A6.E6.B8.85.E7.90.86.E7.BC.93.E5.AD.98"><span class="tocnumber">3.3.1</span> <span class="toctext">避免过度清理缓存</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="#.E5.A4.87.E4.BB.BD.E5.92.8C.E6.81.A2.E5.A4.8D.E5.B7.B2.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.4</span> <span class="toctext">备份和恢复已安装软件包</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#.E5.88.97.E5.87.BA.E6.89.80.E6.9C.89.E4.B8.8D.E5.B1.9E.E4.BA.8Ebase.E6.88.96base-devel.E7.9A.84.E5.B7.B2.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.5</span> <span class="toctext">列出所有不属于base或base-devel的已安装软件包</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#.E9.87.8D.E6.96.B0.E5.AE.89.E8.A3.85.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.6</span> <span class="toctext">重新安装所有软件包</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#.E4.BB.8E.E5.B7.B2.E6.9C.89.E5.AE.89.E8.A3.85.E4.BF.AE.E5.A4.8D_USB_.E7.B3.BB.E7.BB.9F"><span class="tocnumber">3.7</span> <span class="toctext">从已有安装修复 USB 系统</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#.E8.A7.A3.E5.8E.8B.E7.BC.A9.E8.BD.AF.E4.BB.B6.E5.8C.85"><span class="tocnumber">3.8</span> <span class="toctext">解压缩软件包</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#.E6.80.A7.E8.83.BD"><span class="tocnumber">4</span> <span class="toctext">性能</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#.E6.8F.90.E9.AB.98.E6.95.B0.E6.8D.AE.E5.BA.93.E8.AE.BF.E9.97.AE.E9.80.9F.E5.BA.A6"><span class="tocnumber">4.1</span> <span class="toctext">提高数据库访问速度</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#.E5.8A.A0.E5.BF.AB.E4.B8.8B.E8.BD.BD.E9.80.9F.E5.BA.A6"><span class="tocnumber">4.2</span> <span class="toctext">加快下载速度</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#.E4.BD.BF.E7.94.A8_Powerpill"><span class="tocnumber">4.2.1</span> <span class="toctext">使用 Powerpill</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#.E4.BD.BF.E7.94.A8wget"><span class="tocnumber">4.2.2</span> <span class="toctext">使用wget</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-30"><a href="#.E4.BD.BF.E7.94.A8aria2"><span class="tocnumber">4.3</span> <span class="toctext">使用aria2</span></a>
<ul>
<li class="toclevel-3 tocsection-31"><a href="#.E5.AE.89.E8.A3.85"><span class="tocnumber">4.3.1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#.E9.85.8D.E7.BD.AE"><span class="tocnumber">4.3.2</span> <span class="toctext">配置</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="#.E5.8F.82.E6.95.B0.E7.BB.86.E8.8A.82_.3D"><span class="tocnumber">4.3.3</span> <span class="toctext">参数细节 =</span></a>
<ul>
<li class="toclevel-4 tocsection-34"><a href="#.E5.85.B6.E4.BB.96.E8.A7.A3.E9.87.8A"><span class="tocnumber">4.3.3.1</span> <span class="toctext">其他解释</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-35"><a href="#.E4.BD.BF.E7.94.A8.E5.85.B6.E5.AE.83.E7.A8.8B.E5.BA.8F"><span class="tocnumber">4.3.4</span> <span class="toctext">使用其它程序</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id=".E4.BF.AE.E9.A5.B0.E5.92.8C.E4.BE.BF.E5.88.A9">修饰和便利</span></h2>
<h3><span class="mw-headline" id=".E5.BD.A9.E8.89.B2.E8.BE.93.E5.87.BA">彩色输出</span></h3>
<p>pacman 4.1.0 开始支持彩色输出，只需要在<code>/etc/pacman.conf</code>中取消 Color 行前面的注释即可使用。
</p>
<h3><span class="mw-headline" id=".E5.BF.AB.E6.8D.B7.E6.96.B9.E5.BC.8F">快捷方式</span></h3>
<p>使用命令别名简化常用pacman命令，方便使用和记忆。
</p>
<h4><span class="mw-headline" id=".E9.85.8D.E7.BD.AE_shell">配置 shell</span></h4>
<p>下面是个范例，将其加入shell配置文件即，同时适用于<a href="https://wiki.archlinux.org/index.php/Bash_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Bash (简体中文)">Bash</a>和<a href="https://wiki.archlinux.org/index.php/Zsh_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Zsh (简体中文)">Zsh</a>：
</p>
<pre># Pacman 别名示例
alias pacupg='sudo pacman -Syu'        # 同步软件仓库信息然后升级系统
alias pacin='sudo pacman -S'           # 从软件仓库安装软件包
alias pacins='sudo pacman -U'          # 从本地文件安装软件包
alias pacre='sudo pacman -R'           # 删除软件包，保留配置和依赖
alias pacrem='sudo pacman -Rns'        # 彻底删除软件包，清除配置，删除无用依赖
alias pacrep='pacman -Si'              # 显示软件仓库中某软件包的信息
alias pacreps='pacman -Ss'             # 在软件仓库搜索软件包
alias pacloc='pacman -Qi'              # 显示本地数据库中某软件包的信息
alias paclocs='pacman -Qs'             # 在本地数据库搜索软件包
</pre>
<pre># 更多示例
alias pacupd='sudo pacman -Sy &amp;&amp; sudo abs'     # 同步软件仓库信息并更新abs
alias pacinsd='sudo pacman -S --asdeps'        # 将某软件包作为其它软件包的依赖安装
alias pacmir='sudo pacman -Syy'                # 强制刷新软件仓库信息
</pre>
<h4><span class="mw-headline" id=".E7.94.A8.E6.B3.95">用法</span></h4>
<p>就像使用普通命令一样使用这些别名即可。例如，要同步软件仓库信息然后升级系统：
</p>
<pre>$ pacupg
</pre>
<p>从软件仓库安装软件包：
</p>
<pre>$ pacin &lt;软件包1&gt; &lt;软件包2&gt; &lt;软件包3&gt;
</pre>
<p>安装软件包文件：
</p>
<pre>$ pacins /path/to/&lt;软件包路径&gt;
</pre>
<p>彻底删除软件包：
</p>
<pre>$ pacrem &lt;软件包&gt;
</pre>
<p>在软件仓库搜索软件包：
</p>
<pre>$ pacreps &lt;关键字&gt;
</pre>
<p>显示软件仓库中某软件包的信息（比如：占用空间，依赖关系）：
</p>
<pre>$ pacrep &lt;keywords&gt;
</pre>
<h4><span class="mw-headline" id=".E6.B3.A8.E8.A7.A3">注解</span></h4>
<p>上面提供的只是一个例子。按照上面的格式，可以自己编写命令别名，比如：
</p>
<pre>alias pacrem='sudo pacman -Rns'
alias pacout='sudo pacman -Rns'
</pre>
<p>上面的例子中，<code>pacrem</code>和<code>pacout</code>代表同样的命令：<code>sudo pacman -Rns</code>。你可以使用自己喜欢的名称代替这些命令。
</p>
<h3><span class="mw-headline" id=".E5.B7.A7.E7.94.A8_Bash_.E8.AF.AD.E6.B3.95">巧用 Bash 语法</span></h3>
<p>下面应用<a href="https://wiki.archlinux.org/index.php/Bash_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Bash (简体中文)">Bash</a>技巧，实现复杂的pacman功能。
</p>
<ul><li> 安装多个名称部分相同的软件包（而非安装整个软件包组），以<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/groups/x86_64/kde/">kde</a></span>为例：</li></ul>
<pre> pacman -S kde-{applets,theme,tools}
</pre>
<ul><li> 也可以嵌套使用：</li></ul>
<pre> pacman -S kde-{ui-kde,kdeartwork}
</pre>
<ul><li> 使用<code>-s</code>搜索时会匹配软件包描述，从而导致很多不需要的结果。限制只匹配软件包名称：</li></ul>
<pre> pacman -Ss '^vim-'
</pre>
<ul><li> pacman的<code>-q</code>操作会输出所有本地软件包名称。利用该输出、以及简单的shell技巧，重新安装所有名称包含“compiz”的软件包：</li></ul>
<pre> pacman -S $(pacman -Qq | grep compiz)
</pre>
<h2><span class="mw-headline" id=".E7.BB.B4.E6.8A.A4">维护</span></h2>
<p>保持系统干净，遵循 <a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Arch Linux (简体中文)">Arch 之道</a>。
</p>
<h3><span class="mw-headline" id=".E6.98.BE.E7.A4.BA.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85.E5.8F.8A.E5.85.B6.E5.A4.A7.E5.B0.8F">显示所有软件包及其大小</span></h3>
<p>将所有软件包按占用空间大小排序输出：
</p>
<ul><li> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=expac">expac</a></span> 并运行 <code> expac -s "%-30n&nbsp;%m" </code></li>
<li> 用 [community] 中的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=pacgraph">pacgraph</a></span> 加 -c 选项可以生成所有安装的软件包及其大小.</li></ul>
<h4><span class="mw-headline" id=".E6.9F.A5.E6.89.BE.E4.B8.8D.E5.B1.9E.E4.BA.8E.E4.BB.BB.E4.BD.95.E8.BD.AF.E4.BB.B6.E5.8C.85.E7.9A.84.E6.96.87.E4.BB.B6">查找不属于任何软件包的文件</span></h4>
<p>建议定期检查 pacman 数据库之外的文件。通常这些文件是第三方程序使用一般方式安装 (例如 <b>./configure; make; make install</b>)。下面脚本可以找出它们：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pacman-disowned</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

tmp=${TMPDIR-/tmp}/pacman-disowned-$UID-$$
db=$tmp/db
fs=$tmp/fs

mkdir "$tmp"
trap  'rm -rf "$tmp"' EXIT

pacman -Qlq | sort -u &gt; "$db"

find /bin /etc /lib /sbin /usr \
  ! -name lost+found \
  \( -type d -printf '%p/\n' -o -print \) | sort &gt; "$fs"

comm -23 "$fs" "$db"
</pre>
<p>要生成列表：
</p>
<pre>$ pacman-disowned &gt; non-db.txt
</pre>
<p>注意删除 <code>non-db.txt</code> 中的文件时先仔细确认。有写是配置文件、日志等，不要删除它们。
</p>
<h3><span class="mw-headline" id=".E5.88.A0.E9.99.A4.E5.AD.A4.E7.AB.8B.E8.BD.AF.E4.BB.B6.E5.8C.85">删除孤立软件包</span></h3>
<p>递归删除孤立软件包：
</p>
<pre># pacman -Rs $(pacman -Qtdq)
</pre>
<p>下面命令可以插入 <code>$HOME/.bashrc</code> 并在找到孤立软件包时进行删除：
</p>
<pre>orphans() {
  if [[ ! -n $(pacman -Qdt) ]]; then
    echo no orphans to remove
  else
    sudo pacman -Rs $(pacman -Qdtq)
  fi
}</pre>
<h3><span class="mw-headline" id=".E5.88.A0.E9.99.A4base.E8.BD.AF.E4.BB.B6.E5.8C.85.E7.BB.84.E4.BB.A5.E5.A4.96.E7.9A.84.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85">删除base软件包组以外的所有软件包</span></h3>
<p>以下命令会保留base软件包组、删除其他所有软件包：
</p>
 <pre># pacman -Rs $(comm -23 &lt;(pacman -Qeq|sort) &lt;((for i in $(pacman -Qqg base); do pactree -ul $i; done)|sort -u|cut -d ' ' -f 1))</pre>
<p>来源：<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=130176">这个帖子</a>
</p><p>注记：
</p>
<ol><li> <code>comm</code>命令需要已排序的输入，否则会得到诸如“comm: file 1 is not in sorted order”之类的错误信息。</li>
<li> <code>pactree</code>是生成软件包依赖树的工具，输出如下：</li></ol>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pactree -lu logrotate</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">logrotate
popt
glibc
linux-api-headers
tzdata
dcron cron
bash
readline
ncurses
gzip</pre>
<p>为了避免“dcron cron”（前者是软件包名，后者是该软件包提供的软件包名）这样的内容导致错误，用到了<code>cut -d ' ' -f 1</code>——只保留软件包名称。
</p>
<h3><span class="mw-headline" id=".E4.BB.85.E6.98.BE.E7.A4.BA.E6.AD.A3.E5.BC.8F.E5.AE.89.E8.A3.85.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85">仅显示正式安装的软件包</span></h3>
<pre>pacman -Qq |grep -Fv -f &lt;(pacman -Qqm)
</pre>
<h2><span class="mw-headline" id=".E5.AE.89.E8.A3.85.E5.92.8C.E4.BF.AE.E5.A4.8D">安装和修复</span></h2>
<p>几种获取和修复软件包的方法。
</p>
<h3><span class="mw-headline" id=".E4.BB.8E_CD.2FDVD.2FISO_.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85">从 CD/DVD/ISO 安装软件包</span></h3>
<ul><li>先挂载 CD （如果需要，替换<i>cdrom</i>为<i>dvd</i>或其他介质)：</li></ul>
<pre># mount /mnt/cdrom
</pre>
<dl><dd>如果使用的是ISO映像，先在 /mnt 建立一个目录：</dd></dl>
<pre># mkdir /mnt/iso
</pre>
<dl><dd>然后挂载镜像：</dd></dl>
<pre># mount -t iso9660 -o ro,loop /path/to/iso /mnt/iso
</pre>
<ul><li>配置pacman：</li></ul>
<pre># nano -w /etc/pacman.conf
</pre>
<ul><li>将如下仓库信息添加到其他软件仓库（如 extra、core）之前，确保优先使用介质中的软件包：</li></ul>
<pre># 使用 cdrom 作为仓库
[custom]
Server = file:///mnt/cdrom/arch/pkg
</pre>
<dl><dd>如果使用其他介质，记得替换 <i>cdrom</i> 。</dd></dl>
<p>修改<code>pacman.conf</code>后，更新软件仓库即可。
</p>
<h4><span class="mw-headline" id=".E4.BB.8E_Arch_.E7.9A.84_core_.E9.95.9C.E5.83.8F.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85">从 Arch 的 core 镜像安装软件包</span></h4>
<p>如果暂时无法链接网络（比如要配置无线网络），可以通过Arch的core仓库镜像获取软件包。先挂载之：
</p>
<pre># mount -o loop /path/to/arch_core_image/i686/repo-core-i686.sfs /mnt/iso
</pre>
<p>然后修改<code>pacman.conf</code>的<code>[core]</code>段，（临时）替换为镜像挂载的位置：
</p>
<pre>[core]
#Include = /etc/pacman.d/mirrorlist
Server = file:///mnt/iso
</pre>
<p>然后同步：
</p>
<pre># pacman -Syu
</pre>
<h3><span class="mw-headline" id=".E8.87.AA.E5.BB.BA.E6.9C.AC.E5.9C.B0.E4.BB.93.E5.BA.93">自建本地仓库</span></h3>
<p>pacman 3 引入了一个名为<code>repo-add</code>脚本，用于帮助个人用户生成软件仓库。使用 <code>repo-add --help</code> 查看详细用法。
</p><p>将所有要加入仓库的软件包放入一个目录，运行如下命令（<i>repo</i>是自建仓库的名称）：
</p>
<pre>$ repo-add /path/to/repo.db.tar.gz /path/to/*.pkg.tar.xz
</pre>
<p>注意，<code>repo-add</code>生成的数据库文件不一定和软件包放在同一目录，但使用pacman同步时，两者必须放在一起。
</p><p>向仓库添加新软件包（并移除旧的）：
</p>
<pre>$ repo-add /path/to/repo.db.tar.gz /path/to/packagetoadd-1.0-1-i686.pkg.tar.xz
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> 注意: </strong>使用<code>repo-remove</code>删除软件包。</div>
<p>本地仓库建立后，添加仓库到<code>pacman.conf</code>。<code>db.tar.gz</code>文件的名字就是仓库的名字，路径格式是<i>file://...</i>或FTP地址<i><a rel="nofollow" class="external free" href="ftp://localhost/path/to/directory">ftp://localhost/path/to/directory</a></i>。
</p><p>欢迎到<a href="https://wiki.archlinux.org/index.php/Unofficial_user_repositories" title="Unofficial user repositories">非官方用户软件仓库</a>，分享你的仓库。
</p>
<h3><span class="mw-headline" id=".E5.9C.A8.E7.BD.91.E7.BB.9C.E4.B8.8A.E5.85.B1.E4.BA.ABpacman.E7.BC.93.E5.AD.98">在网络上共享pacman缓存</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;"><strong> 提示： </strong>另外一个方案：<a rel="nofollow" class="external text" href="http://xyne.archlinux.ca/projects/pacserve/">pacserve</a>。</div>
<p>要在多机间共享软件包，使用任何网络协议共享<code>/var/cache/pacman/</code>目录即可。本节介绍如何使用shfs或sshfs，在局域网内的多机间分享软件包及相关库文件目录。注意，网络间共享可能速度缓慢，取决于所选文件系统等因素。
</p><p>首先，在服务器安装任意网络文件系统：<a href="https://wiki.archlinux.org/index.php/Sshfs" class="mw-redirect" title="Sshfs">sshfs</a>，<a href="https://wiki.archlinux.org/index.php/Shfs" title="Shfs">shfs</a>，<a href="https://wiki.archlinux.org/index.php?title=Ftpfs&amp;action=edit&amp;redlink=1" class="new" title="Ftpfs (page does not exist)">ftpfs</a>，<a href="https://wiki.archlinux.org/index.php/Smbfs" class="mw-redirect" title="Smbfs">smbfs</a>或<a href="https://wiki.archlinux.org/index.php/Nfs" class="mw-redirect" title="Nfs">nfs</a>。
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;"><strong> 提示： </strong>使用sshfs或shfs前，先阅读<a href="https://wiki.archlinux.org/index.php/Using_SSH_Keys" class="mw-redirect" title="Using SSH Keys">Using SSH Keys</a>。</div>
<p>然后，挂载服务器的<code>/var/cache/pacman/pkg</code>到客户端机器上的<code>/var/cache/pacman/pkg</code>目录即可。
</p><p>要分享软件包数据，使用同样方法共享<code>/var/lib/pacman/sync/{core,extra,testing,community}</code>即可。修改<code>/etc/fstab</code>以开机自动挂载。
</p>
<h4><span class="mw-headline" id=".E9.81.BF.E5.85.8D.E8.BF.87.E5.BA.A6.E6.B8.85.E7.90.86.E7.BC.93.E5.AD.98">避免过度清理缓存</span></h4>
<p>执行<code>pacman -Sc</code>清理软件包缓存时，会删除所有当前机器上为安装的软件包。由于pacman无法判断软件包是否在其他机器上安装，这会导致移除某些还需要的软件包。
</p><p>避免的方法是修改清理方式为：删除所有已有新版本的过期软件包。添加以下内容到<code>/etc/pacman.conf</code>的<code>[options]</code>段：
</p>
<pre>CleanMethod = KeepCurrent
</pre>
<h3><span class="mw-headline" id=".E5.A4.87.E4.BB.BD.E5.92.8C.E6.81.A2.E5.A4.8D.E5.B7.B2.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85">备份和恢复已安装软件包</span></h3>
<p>定期备份软件包是个好习惯。万一系统出了大问题，需要重装，就可以利用备份的软件包恢复到原先的系统。
</p>
<ul><li>第一步，生成系统上安装的非本地（即从官方仓库获取的）软件包列表：</li></ul>
<pre> $ comm -23 &lt;(pacman -Qeq|sort) &lt;(pacman -Qmq|sort) &gt; pkglist
</pre>
<ul><li>把生成的pkglist存储在一个安全的地方，比如U盘，或者gist.github.com、evernote、dropbox之类的文本储存网站。</li></ul>
<ul><li>今后重装系统时，把pkglist复制到新系统。</li></ul>
<ul><li>使用如下命令安装所有软件包：</li></ul>
<pre> # pacman -S $(&lt; pkglist)
</pre>
<p>要是备份的软件包列表包含非官方软件包（从AUR或其他什么地方下载的），就得使用下面这个吓人的命令了，不然pacman会出错：
</p>
<pre># pacman -S --needed $(diff &lt;(cat badpkglist|sort) &lt;(diff &lt;(cat badpkglist|sort) &lt;(pacman -Slq|sort)|grep \&lt;|cut -f2 -d' ')|grep \&lt;|cut -f2 -d' ')
</pre>
<p>解释：
</p>
<ul><li> <i>pacman -Slq</i>列出所有可以安装的软件包。由于输出是按照来源仓库排序的，需要再调用<i>sort</i>排序。</li>
<li> 排序是为<i>diff</i>命令比对列表做准备。</li>
<li> 第一个<i>diff</i>返回所有无法安装的软件包；第二个返回所有可以安装的软件包。</li>
<li> <i>--needed</i>表示跳过已安装软件包。</li></ul>
<p>可以接着用<i>yaourt</i>恢复从AUR获取的软件包（不推荐）：
</p>
<pre>$ yaourt -S --noconfirm $(diff &lt;(cat badpkglist|sort) &lt;(pacman -Slq|sort) |grep \&lt;|cut -f2 -d' ')
</pre>
<p>最后，还可以卸载掉新系统上安装的、但之前系统并未安装的软件包。
警告：务必小心使用，仔细查看pacman输出，避免悲剧。
</p>
<pre># pacman -Rsu $(diff &lt;(cat badpkglist|sort) &lt;(pacman -Qq|sort) | grep \&gt;|cut -f2 -d' ')
</pre>
<h3><span class="mw-headline" id=".E5.88.97.E5.87.BA.E6.89.80.E6.9C.89.E4.B8.8D.E5.B1.9E.E4.BA.8Ebase.E6.88.96base-devel.E7.9A.84.E5.B7.B2.E5.AE.89.E8.A3.85.E8.BD.AF.E4.BB.B6.E5.8C.85">列出所有不属于base或base-devel的已安装软件包</span></h3>
<p>下列命令输出所有不属于base或base-devel软件包组的已安装软件包。这些软件包一般都是用户自己安装的：
</p>
<pre>comm -23 &lt;(pacman -Qeq|sort) &lt;(pacman -Qgq base base-devel|sort)
</pre>
<h3><span class="mw-headline" id=".E9.87.8D.E6.96.B0.E5.AE.89.E8.A3.85.E6.89.80.E6.9C.89.E8.BD.AF.E4.BB.B6.E5.8C.85">重新安装所有软件包</span></h3>
<p>要是你的系统遭到了大规模破坏（比如<code>rm -rf</code>什么的），可以通过pacman重新安装所有软件包来挽救。
</p><p>如果没有安装外来软件包（比如来自AUR的），使用如下命令即可：
</p>
<pre># pacman -Qeq | pacman -S -
# pacman -Qdq | pacman -S --asdeps -
</pre>
<p>如果安装了外来软件包，使用上面的命令会出错。下面的命令先生成所有软件包列表，再用<code>pacman -Qmq</code>剔除外来软件包，即重新安装所有仓库中可以找到的软件包，同时保留依赖安装、手动安装标志：
</p>
<pre># comm -23 &lt;(pacman -Qeq) &lt;(pacman -Qmq) | pacman -S -
# comm -23 &lt;(pacman -Qdq) &lt;(pacman -Qmq) | pacman -S --asdeps -
</pre>
<h3><span class="mw-headline" id=".E4.BB.8E.E5.B7.B2.E6.9C.89.E5.AE.89.E8.A3.85.E4.BF.AE.E5.A4.8D_USB_.E7.B3.BB.E7.BB.9F">从已有安装修复 USB 系统</span></h3>
<p>如果你有一个Arch安装在U盘上，不小心搞坏了（比如，写入U盘时断电了），可以使用主机上的Arch修复U盘上的Arch（假设U盘挂载在/newarch）：
</p>
<pre># pacman -S $(pacman -Qq --dbpath /newarch/var/lib/pacman) --root /newarch --dbpath /newarch/var/lib/pacman
</pre>
<h3><span class="mw-headline" id=".E8.A7.A3.E5.8E.8B.E7.BC.A9.E8.BD.AF.E4.BB.B6.E5.8C.85">解压缩软件包</span></h3>
<p>Arch软件包其实就是普通的xz压缩包，解压方法没啥特别的：
</p>
<pre>$ tar -Jxvf package.tar.xz
</pre>
<h2><span class="mw-headline" id=".E6.80.A7.E8.83.BD">性能</span></h2>
<h3><span class="mw-headline" id=".E6.8F.90.E9.AB.98.E6.95.B0.E6.8D.AE.E5.BA.93.E8.AE.BF.E9.97.AE.E9.80.9F.E5.BA.A6">提高数据库访问速度</span></h3>
<p>Pacman将所有软件包的信息放在一一对应的许多小文件中。通过改善数据库访问速度，可以减少花在数据库相关任务上的时间，比如：寻找软件包、检索软件包依赖性。
</p><p>最安全最简单的方法是以root身份运行
</p>
<pre># pacman-optimize
</pre>
<p>上述命令试图将所有小文件放在磁盘上同一个物理区域，以减少磁头移动。这种方法很安全，但不一定有效。其效果取决于你的文件系统、磁盘使用率、和磁盘碎片程度。另一种更激进的方式是在优化数据库之前首先删除 cache 中所有未安装以及不使用的仓库中的包：
</p>
<pre># pacman -Sc &amp;&amp; pacman-optimize
</pre>
<h3><span class="mw-headline" id=".E5.8A.A0.E5.BF.AB.E4.B8.8B.E8.BD.BD.E9.80.9F.E5.BA.A6">加快下载速度</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> 注意: </strong>如果你的包下载速度变得极慢，首先确定你用的是那些(<a href="https://wiki.archlinux.org/index.php/Mirrors_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Mirrors (简体中文)">镜像</a>)网站而不是ftp.archlinux.org，因为后者<a rel="nofollow" class="external text" href="https://www.archlinux.org/news/302/">从2007年3月开始限速</a>。</div>
<p>可以通过各种下载工具而不是Pacman内置的下载方式，来改善Pacman的下载速度。
</p><p>不论怎样，在做任何修改前，你必须确定拥有了最新版的Pacman：
</p>
<pre># pacman -Syu
</pre>
<h4><span class="mw-headline" id=".E4.BD.BF.E7.94.A8_Powerpill">使用 Powerpill</span></h4>
<p>Powerpill 是 Pacman 的完整包裹程序，增加了平行下载和分段下载功能，加速下载过程。Pacman 一次只下载一个软件包，完成后才开始下一个下载。 Powerpill 同时下载多个软件包。<a href="https://wiki.archlinux.org/index.php/Powerpill" title="Powerpill"> Powerpill wiki 页面</a>提供了基本的配置和使用方法。
</p>
<h4><span class="mw-headline" id=".E4.BD.BF.E7.94.A8wget">使用wget</span></h4>
<p>对于需要更强大代理支持的用户来说，用wget比用Pacman自己的下载方式更加方便。
</p><p>要使用 <code>wget</code>，首先使用<code>pacman -S wget</code>安装它，然后修改<code>/etc/pacman.conf</code>并在其中的<code>[options]</code>区段将下面内容去掉注释：
</p>
<pre>XferCommand = /usr/bin/wget -c --passive-ftp -c&nbsp;%u
</pre>
<p>除了将<code>wget</code>参数放在<code>/etc/pacman.conf</code>里，你也可以直接修改<code>wget</code>配置文件（全局文件是<code>/etc/wgetrc</code>，各个用户的文件是<code>$HOME/.wgetrc</code>）。
</p>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8aria2">使用aria2</span></h3>
<p><a href="https://wiki.archlinux.org/index.php/Aria2" title="Aria2">aria2</a>是一个具有断点续传和分块下载功能的轻量级下载软件，支持HTTP/HTTPS/FTP协议。<a rel="nofollow" class="external text" href="http://aria2.sourceforge.net/">aria2</a>可以多线程通过HTTP/HTTPS和FTP协议连接镜像服务器，显著提高下载速度。
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> 注意: </strong>在Pacman的XferCommand使用 aria2c <b>不会</b>导致并行下载多个包。因为Pacman调用XferCommand时是一次一个包调用的，等待下载完成才会启动下一个。想要并行下载多个包，参见下面的 <a href="#.E4.BD.BF.E7.94.A8_powerpill-light"> powerpill-light</a> 部分。</div>
<h5><span class="mw-headline" id=".E5.AE.89.E8.A3.85">安装</span></h5>
<p>通过<code>pacman -S aria2</code>安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=aria2">aria2</a></span>。
</p>
<h5><span class="mw-headline" id=".E9.85.8D.E7.BD.AE">配置</span></h5>
<p>修改<code>/etc/pacman.conf</code>，在<code>[option]</code>段添加下列一行（如果已存在则修改之）：
</p>
 <pre>XferCommand = /usr/bin/aria2c --allow-overwrite=true -c --file-allocation=none --log-level=error -m2 --max-connection-per-server=2 --max-file-not-found=5 --min-split-size=5M --no-conf --remote-time=true --summary-interval=60 -t5 -d / -o&nbsp;%o&nbsp;%u</pre>
<h4><span class="mw-headline" id=".E5.8F.82.E6.95.B0.E7.BB.86.E8.8A.82_.3D">参数细节 =</span></h4>
<dl><dt> <code>/usr/bin/aria2c</code></dt>
<dd> aria2主程序的完整路径。</dd>
<dt> <code>--allow-overwrite=true</code></dt>
<dd> 如果相应的控制文件不存在则重新下载。(默认值：false)</dd>
<dt> <code>-c, --continue</code></dt>
<dd> 如果相应的控制文件存在则继续未完成的下载。</dd>
<dt> <code>--file-allocation=none</code></dt>
<dd> 下载开始前预设空间。(默认值: prealloc) <b><sup>1</sup></b></dd>
<dt> <code>--log-level=error</code></dt>
<dd> 设置错误输出级别。 (默认值: debug)</dd>
<dt> <code>-m2, --max-tries=2</code></dt>
<dd> 从每个镜像源下载特定文件的最大尝试次数设为2。 (默认值: 5)</dd>
<dt> <code>--max-connection-per-server=2</code></dt>
<dd> 下载每个文件时到每个镜像源的最大连接数设为2。(默认值: 1)</dd>
<dt> <code>--max-file-not-found=5</code></dt>
<dd> 如果5次尝试后仍未下载完成1字节则强制停止。(默认值: 0)</dd>
<dt> <code>--min-split-size=5M</code></dt>
<dd> 只有当文件大于5MB时才分割下载。 (默认值: 20M)</dd>
<dt> <code>--no-conf</code></dt>
<dd> 不加载 <code>aria2.conf</code> 。 (默认值: <code>~/.aria2/aria2.conf</code>)</dd>
<dt> <code>--remote-time=true</code></dt>
<dd> 对远程文件应用时间戳并应用到本地文件。 (默认值: false)</dd>
<dt> <code>--summary-interval=60</code></dt>
<dd> 每60s显式一次下载总进度。 (默认值: 60) <b><sup>2</sup></b></dd>
<dt> <code>-t5, --timeout=5</code></dt>
<dd> 对镜像源的连接建立后5s超时。 (默认值: 60)</dd>
<dt> <code>-d, --dir</code></dt>
<dd> 由 <a href="https://wiki.archlinux.org/index.php/Pacman" title="Pacman">pacman</a> 设定的文件下载目录。</dd>
<dt> <code>-o, --output</code></dt>
<dd> 输出的下载文件的文件名</dd>
<dt> <code>%o</code></dt>
<dd> 代表 pacman 指定的文件名的变量</dd>
<dt> <code>%u</code></dt>
<dd> 代表 pacman 指定的 URL 的变量</dd></dl>
<h5><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E8.A7.A3.E9.87.8A">其他解释</span></h5>
<dl><dt> <sup>1</sup> <code>--file-allocation=falloc</code></dt>
<dd> 对较新的文件系统建议使用，如 ext4(支持extents)、 btrfs 和 xfs 因为它们存储大文件(GB级别)时速度很快。 
较老的文件系统如ext3则不要使用falloc，因为prealloc消耗的时间几乎和标准分配相同，同时会锁定aria2进程而停止下载。</dd></dl>
<dl><dt><sup>2</sup> <code>--summary-interval=0</code></dt>
<dd> 减少下载总进度的输出并有可能改善性能。日志会按照 <code>log-level</code> 选项的设置继续输出。</dd></dl>
<h4><span class="mw-headline" id=".E4.BD.BF.E7.94.A8.E5.85.B6.E5.AE.83.E7.A8.8B.E5.BA.8F">使用其它程序</span></h4>
<p>这里还有一些可以和Pacman协同工作的下载软件。下面列举了它们对应的XferCommand命令写法：
</p>
<ul><li> <code>snarf</code>: <code>XferCommand = /usr/bin/snarf -N&nbsp;%u</code></li>
<li> <code>lftp</code>: <code>XferCommand = /usr/bin/lftp -c pget&nbsp;%u</code></li>
<li> <code>axel</code>: <code>XferCommand = /usr/bin/axel -n 2 -v -a -o&nbsp;%o&nbsp;%u</code></li></ul>

<!-- 
NewPP limit report
Cached time: 20170527105429
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.030 seconds
Real time usage: 0.032 seconds
Preprocessor visited node count: 969/1000000
Preprocessor generated node count: 2670/1000000
Post‐expand include size: 10622/2097152 bytes
Template argument size: 4784/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.115      1 - -total
 28.75%    4.921     71 - Template:Ic
  8.31%    1.422      4 - Template:META_Box_Blue
  8.23%    1.409      3 - Template:注意
  7.33%    1.255      6 - Template:META_Box
  6.87%    1.175      2 - Template:小贴士
  5.32%    0.911      1 - Template:TranslationStatus_(简体中文)
  4.75%    0.813      1 - Template:Translateme_(简体中文)
  3.66%    0.627      2 - Template:META_Box_Green
  3.51%    0.601      1 - Template:META_Message
-->

<!-- Saved in parser cache with key archwiki:pcache:idhash:4435-0!*!0!!en!5!* and timestamp 20170527105429 and revision id 456232
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;oldid=456232">https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_(简体中文)&amp;oldid=456232</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.archlinux.org/index.php/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.archlinux.org/index.php/Category:Package_management_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="Category:Package management (简体中文)">Package management (简体中文)</a></li><li><a href="https://wiki.archlinux.org/index.php/Category:%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" title="Category:简体中文">简体中文</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="https://wiki.archlinux.org/index.php/Category:Pages_with_ignored_display_titles" title="Category:Pages with ignored display titles">Pages with ignored display titles</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="View the content page [Alt+Shift+c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.archlinux.org/index.php?title=Talk:Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [Alt+Shift+t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;action=edit" title="This page is protected.
You can view its source [Alt+Shift+e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;action=history" title="Past revisions of this page [Alt+Shift+h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.archlinux.org/index.php?title=Special:CreateAccount&amp;returnto=Pacman%2FTips+and+tricks+%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.archlinux.org/index.php?title=Special:UserLogin&amp;returnto=Pacman%2FTips+and+tricks+%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="You are encouraged to log in; however, it is not mandatory [Alt+Shift+o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="https://wiki.archlinux.org/index.php/Main_page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class="pBody">
							<ul>
											<li id="n-mainpage-description"><a href="https://wiki.archlinux.org/index.php/Main_page" title="Visit the main page [Alt+Shift+z]" accesskey="z">Main page</a></li>
											<li id="n-categories"><a href="https://wiki.archlinux.org/index.php/Table_of_contents">Categories</a></li>
											<li id="n-portal"><a href="https://wiki.archlinux.org/index.php/Getting_involved" title="Various ways Archers can contribute to the community">Getting involved</a></li>
											<li id="n-currentevents"><a href="https://wiki.archlinux.org/index.php/ArchWiki:News" title="The latest lowdown on the wiki">Wiki news</a></li>
											<li id="n-randompage"><a href="https://wiki.archlinux.org/index.php/Special:Random" title="Load a random page [Alt+Shift+x]" accesskey="x">Random page</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="/index.php" id="searchform">
					<input name="title" value="Special:Search" type="hidden">
					<input name="search" placeholder="Search ArchWiki" title="Search ArchWiki [Alt+Shift+f]" accesskey="f" id="searchInput" autocomplete="off" type="search">
					<input name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" type="submit">&nbsp;
						<input name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" type="submit">
				</form>

							</div>
		</div>
		<div class="generated-sidebar portlet" id="p-interaction" role="navigation">
		<h3>interaction</h3>
		<div class="pBody">
							<ul>
											<li id="n-help"><a href="https://wiki.archlinux.org/index.php/Category:Help" title="Wiki navigation, reading, and editing help">Help</a></li>
											<li id="n-Contributing"><a href="https://wiki.archlinux.org/index.php/ArchWiki:Contributing">Contributing</a></li>
											<li id="n-recentchanges"><a href="https://wiki.archlinux.org/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [Alt+Shift+r]" accesskey="r">Recent changes</a></li>
											<li id="n-Recent-talks"><a href="https://wiki.archlinux.org/index.php/Special:RecentChanges?namespace=0&amp;invert=1" rel="nofollow">Recent talks</a></li>
											<li id="n-newpages"><a href="https://wiki.archlinux.org/index.php/Special:NewPages">New pages</a></li>
											<li id="n-Statistics"><a href="https://wiki.archlinux.org/index.php/ArchWiki:Statistics">Statistics</a></li>
											<li id="n-Reports"><a href="https://wiki.archlinux.org/index.php/ArchWiki:Reports">Reports</a></li>
											<li id="n-Requests"><a href="https://wiki.archlinux.org/index.php/ArchWiki:Requests">Requests</a></li>
									</ul>
					</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.archlinux.org/index.php/Special:WhatLinksHere/Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" title="A list of all wiki pages that link here [Alt+Shift+j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.archlinux.org/index.php/Special:RecentChangesLinked/Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" rel="nofollow" title="Recent changes in pages linked from this page [Alt+Shift+k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.archlinux.org/index.php/Special:SpecialPages" title="A list of all special pages [Alt+Shift+q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;printable=yes" rel="alternate" title="Printable version of this page [Alt+Shift+p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;oldid=456232" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
				<div id="p-lang" class="portlet" role="navigation">
				<h3>In other languages</h3>

				<div class="pBody">
					<ul>
													<li class="interlanguage-link interwiki-en"><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks" title="Pacman/Tips and tricks – English" hreflang="en" class="interlanguage-link-target" lang="en">English</a></li>
													<li class="interlanguage-link interwiki-es"><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks_%28Espa%C3%B1ol%29" title="Pacman/Tips and tricks – español" hreflang="es" class="interlanguage-link-target" lang="es">Español</a></li>
													<li class="interlanguage-link interwiki-fa"><a href="http://wiki.archusers.ir/index.php/Pacman_tips" title="Pacman tips – فارسی" hreflang="fa" class="interlanguage-link-target" lang="fa">فارسی</a></li>
													<li class="interlanguage-link interwiki-fr"><a href="http://wiki.archlinux.fr/Astuces_Pacman" title="Astuces Pacman – français" hreflang="fr" class="interlanguage-link-target" lang="fr">Français</a></li>
													<li class="interlanguage-link interwiki-it"><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks_%28Italiano%29" title="Pacman/Tips and tricks – italiano" hreflang="it" class="interlanguage-link-target" lang="it">Italiano</a></li>
													<li class="interlanguage-link interwiki-ja"><a href="https://wiki.archlinuxjp.org/index.php/Pacman_%E3%83%92%E3%83%B3%E3%83%88" title="Pacman ヒント – 日本語" hreflang="ja" class="interlanguage-link-target" lang="ja">日本語</a></li>
													<li class="interlanguage-link interwiki-ru"><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29" title="Pacman/Tips and tricks – русский" hreflang="ru" class="interlanguage-link-target" lang="ru">Русский</a></li>
													<li class="interlanguage-link interwiki-tr"><a href="https://wiki.archlinux.org/index.php/Pacman_ipu%C3%A7lar%C4%B1_%28T%C3%BCrk%C3%A7e%29" title="Pacman ipuçları – Türkçe" hreflang="tr" class="interlanguage-link-target" lang="tr">Türkçe</a></li>
											</ul>

									</div>
			</div>
				</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<ul id="f-list">
									<li id="lastmod"> This page was last modified on 7 November 2016, at 07:24.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
									<li id="privacy"><a href="https://wiki.archlinux.org/index.php/ArchWiki:Privacy_policy" class="mw-redirect" title="ArchWiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="https://wiki.archlinux.org/index.php/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
									<li id="disclaimer"><a href="https://wiki.archlinux.org/index.php/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
									<li id="mobileview"><a href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":49});});</script>

<div style="display: none; font-size: 11.4667px;" class="suggestions"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body><!-- Cached/compressed 20170527105429 --></html>